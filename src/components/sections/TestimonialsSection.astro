---
const testimonials = [
  {
    id: 1,
    quote:
      "Emmergia nos ayuda a tener una higiene financiera dentro de los proyectos al permitirnos crear cuentas separadas y compartimentar los gastos de forma fácil y rápida.",
    author: "Blai Carandell",
    role: "CEO Noba Ventures",
    image:
      "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=1000&auto=format&fit=crop", // Retrato
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/2560px-Amazon_logo.svg.png", // Logo Demo
    logoWidth: "w-24",
  },
  {
    id: 2,
    quote:
      "Gracias a la automatización de facturas, hemos reducido el tiempo de gestión administrativa en un 40%, permitiendo al equipo centrarse en lo que importa.",
    author: "Laura Gómez",
    role: "Fundadora de TechStart",
    image:
      "https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?q=80&w=1000&auto=format&fit=crop",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/2560px-Google_2015_logo.svg.png",
    logoWidth: "w-20",
  },
  {
    id: 3,
    quote:
      "La seguridad y la rapidez en las transferencias internacionales nos han dado la confianza necesaria para expandirnos a nuevos mercados europeos.",
    author: "Marcos Ruiz",
    role: "Director Financiero, GlobalTrade",
    image:
      "https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?q=80&w=1000&auto=format&fit=crop",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/51/IBM_logo.svg/2560px-IBM_logo.svg.png",
    logoWidth: "w-16",
  },
  {
    id: 4,
    quote:
      "Qonto me ahorra mucho tiempo en tareas financieras y me ofrece mejores características que un banco tradicional.",
    author: "Jack O'Grady",
    role: "COO y cofundador de Colibid",
    image:
      "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1000&auto=format&fit=crop",
    logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Netflix_2015_logo.svg/2560px-Netflix_2015_logo.svg.png",
    logoWidth: "w-20",
  },
];
---

<section class="w-full bg-white py-24 md:py-40 overflow-hidden">
  <div class="max-w-[1200px] mx-auto px-6 md:px-12">
    <div class="md:hidden mb-12">
      <h2 class="text-3xl font-medium text-gray-900 text-left">
        Lo que opinan nuestros clientes
      </h2>
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 gap-x-12 lg:gap-x-24 items-center"
    >
      <div class="order-2 md:order-1 flex flex-col justify-center relative">
        <h2
          class="hidden md:block text-4xl lg:text-5xl font-medium text-gray-900 mb-16 lg:mb-24 text-left"
        >
          Lo que opinan nuestros clientes
        </h2>

        <div class="overflow-hidden w-full relative">
          <div
            id="text-track"
            class="flex transition-transform duration-500 ease-out will-change-transform"
          >
            {
              testimonials.map((t, index) => (
                <div class="w-full flex-shrink-0 pr-4 md:pr-8">
                  <div class="bg-gradient-to-br from-pink-50 to-orange-50 rounded-lg p-8 lg:p-12 md:min-h-[420px] flex flex-col justify-between relative border border-pink-100/50">
                    <div class="absolute bottom-4 right-6 text-sm text-gray-400 font-mono">
                      {index + 1} de {testimonials.length}
                    </div>

                    <div>
                      <img
                        src={t.logo}
                        alt="Logo cliente"
                        class={`h-8 lg:h-10 object-contain mb-8 mix-blend-multiply opacity-80 ${t.logoWidth}`}
                      />

                      <h3 class="text-xl lg:text-2xl font-light text-gray-900 leading-snug relative">
                        <span class="text-pink-400 font-serif text-3xl absolute -left-3 -top-2">
                          “
                        </span>
                        {t.quote}
                        <span class="text-pink-400 font-serif text-3xl relative top-2 ml-1">
                          ”
                        </span>
                      </h3>
                    </div>

                    <div class="mt-8">
                      <p class="font-bold text-gray-900 text-base">
                        {t.author}
                      </p>
                      <p class="text-sm text-gray-500">{t.role}</p>
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
        </div>

        <div class="flex items-center gap-4 mt-8 md:mt-12">
          <button
            id="prev-btn"
            class="w-12 h-12 flex items-center justify-center rounded border border-gray-200 hover:border-pink-500 text-gray-900 hover:text-pink-600 transition-colors disabled:opacity-30 disabled:hover:border-gray-200 disabled:hover:text-gray-900"
            aria-label="Anterior"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"></path>
            </svg>
          </button>

          <button
            id="next-btn"
            class="w-12 h-12 flex items-center justify-center rounded bg-gray-900 hover:bg-gray-800 text-white transition-colors disabled:opacity-50"
            aria-label="Siguiente"
          >
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
        </div>
      </div>

      <div
        class="order-1 md:order-2 relative w-full h-[400px] md:h-[600px] lg:h-[650px] rounded-lg overflow-hidden"
      >
        {
          testimonials.map((t, index) => (
            <div
              class="absolute inset-0 w-full h-full transition-opacity duration-500 ease-in-out bg-white"
              data-image-index={index}
              style={`opacity: ${index === 0 ? "1" : "0"}; z-index: ${index === 0 ? "10" : "0"};`}
            >
              <img
                src={t.image}
                alt={`Foto de ${t.author}`}
                class="w-full h-full object-cover object-top"
                loading="lazy"
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
<section class="bg-black text-white py-24 text-center">
  <div class="container mx-auto px-4">
    <h2 class="text-4xl md:text-5xl font-medium mb-6">
      ¿Todo listo? Abre tu cuenta en 10 min.
    </h2>
    <p class="text-lg md:text-xl max-w-3xl mx-auto mb-12">
      Simplificamos la gestión financiera de empresas y emprendedores. Porque
      nada debe frenar el crecimiento de tu negocio. Ni siquiera el papeleo.
    </p>
    <div class="flex flex-col md:flex-row justify-center gap-4 mb-6">
      <a
        href="#"
        class="bg-white text-black font-medium py-3 px-8 rounded-md hover:bg-gray-100 transition duration-300"
      >
        Prueba Qonto gratis
      </a>
      <a
        href="#"
        class="bg-transparent border border-white text-white font-medium py-3 px-8 rounded-md hover:bg-white/10 transition duration-300"
      >
        Solicita una demo
      </a>
    </div>
    <p class="text-sm text-gray-300">30 días de prueba gratuita.</p>
  </div>
</section>
<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    // Selectores
    const track = document.getElementById("text-track");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    const images = document.querySelectorAll("[data-image-index]");

    // Estado
    let currentIndex = 0;
    const totalSlides = images.length;

    function updateState(index) {
      // 1. Mover Texto (Slider Horizontal)
      // Como cada slide es w-full, nos movemos 100% * index
      track.style.transform = `translate3d(-${index * 100}%, 0, 0)`;

      // 2. Cambiar Imagen (Fade / Stack Effect)
      images.forEach((img, i) => {
        const el = img;
        if (i === index) {
          el.style.opacity = "1";
          el.style.zIndex = "10";
        } else {
          el.style.opacity = "0";
          el.style.zIndex = "0";
        }
      });

      // 3. Actualizar botones
      prevBtn.disabled = index === 0;
      nextBtn.disabled = index === totalSlides - 1;
    }

    // Listeners
    nextBtn?.addEventListener("click", () => {
      if (currentIndex < totalSlides - 1) {
        currentIndex++;
        updateState(currentIndex);
      }
    });

    prevBtn?.addEventListener("click", () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateState(currentIndex);
      }
    });

    // Inicializar
    updateState(0);
  });
</script>
